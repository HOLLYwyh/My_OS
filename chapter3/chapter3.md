# Chapter3
1. cr0寄存器的第0位表示是实模式还是保护模式，0-实模式，1-保护模式
2. 进入保护模式的主要步骤：
(1)准备GDT
(2)用lgdt加载gdtr
(3)打开A20
(4)置cr0的PE位
(5)跳转,进入保护模式
注:具体内容详见书的第三章
3. 不能从32位代码段返回实模式，只能从16位代码段返回
4. LDT 与GDT类似，但必须将Tl位置为1，在运用时需要用ldt指令加载ldtr,可以将一个任务的所有东西封装在一个LDT中
5. CPL、DPL、RPL
(1)CPL
current Priviledge Level 当前执行的程序或任务的特权级。
它被存储在 cs 和 ss 的第 0 位和第 1 位上。在通常情况下， CPL 等于代码所在的段的特权级。当程序转移到不同特权级的代码段时，处理器将改变 CPL 。
(2)DPL
Descriptor Privilege Level  DPL 表示段或者门的特权级
正如我们先前所看到的那样。当当前代码段试图访问一个段或者门时， DPL 将会和 CPL 以及段或门选择子的 RPL 相比
较，根据段或者门类型的不同， DPL 将会被区别对待
- 数据段
DPL 规定了可以访问此段的最低特权级。比如，一个数据段的 DPL 是 1 ，那么只有运行在 CPL 为 0 或者 1 的程序才有权访问它。
- 非一致代码段
DPL 规定访问此段的特权级。比如，一个非一致代码段的特权级为 0 ，那么只有 CPL 为 0 的程序才可以访问它。
- 调用门
DPL 规定了当前执行的程序或任务可以访问此调用门的最低特权级（这与数据段的规则是一致的）。
- 一致代码段和通过调用门访问的非一致代码段
DPL 规定了访问此段的最高特权级。比如，一个一致代码段的 DPL 是 2 ，那么 CPL 为 0 和 1 的程序将无法访问此段。
- TSS:
DPL 规定了可以访问此 TSS 的最低特权级（这与数据段的规则是一致的）。
(3)RPL
Request Priviledgd Level 通过段选择子的第0位和第1位表现出来的。
通过检查RPL和CPL来确认一个访问请求是否合法。若RPL的数字比CPL大，则RPL将会起决定性作用
6. 特权级转移
- 通过jmp或call进行直接转移
若是非一致代码段，要求CPL必须等于目标段的DPL，同时要求RPL小于等于DPL；若目标是一致代码段，则要求CPL大于或等于目标段的DPL
- 通过门进行跳转
直观来看，一个门描述了由一个选择子和一个偏移所指定的线性地址，门描述符有以下几种：
(1)调用门(Call gates)
(2)中断门(Interrput gates)
(3)陷阱门(Trap gates)
(4)任务门(Task gates)
- - 调用门
(1) 调用门只能实现特权级由低到高的转移。
(2) call一个调用门是长调用
<font color="red">具体内容见书P43</font>
(3) TSS(Task-State Stack)

































